INTSourceChangelist:2532148
Availability:Public
Title:マテリアル インスタンス エディタ ユーザーガイド
Crumbs: %ROOT%, Engine, Engine/Rendering/Materials, Engine/Rendering/Materials/MaterialInstances
Description:MaterialInstanceConstants を修正するためにマテリアル インスタンス エディタを使用するためのガイド

[TOC(start:2)]



## 概要

マテリアル インスタンス エディタはマテリアル インスタンスのパラメータを修正するために使用します。マテリアル インスタンスにあまり詳しくない場合は、 [インスタンス化マテリアル](Engine/Rendering/Materials/MaterialInstances) ページを参照してください。



## マテリアル インスタンス エディタを開く

マテリアル インスタンス エディタを開くには、いずれかのマテリアル インスタンス アセットを **ダブルクリック** 、 
もしくは **コンテンツ ブラウザ** のマテリアル インスタンス アセットのコンテクスト メニューを **右クリック** します。いずれかの操作をすると、マテリアル インスタンス エディタで特定のマテリアル インスタンスが編集のために開きます。または、アクタ上で **右クリック** し、 **[Materials]** メニューの **[Material Name]** サブメニューから **[Edit Material Instance]** を選択しても 
マテリアル インスタンス エディタを開くことができます。



## マテリアル インスタンス エディタ インターフェース

マテリアル インスタンス エディタは以下の領域で構成されています。

![materialinstanceeditor.png](materialinstanceeditor.png)(w:900 h:662)


1. [ツールバー](#ツールバー) - マテリアル インスタンスのレンダリング情報を保存、検索、表示することができます。
1. [ビューポート表示オプション](#ビューポート表示オプション) - ビューポートで使用したメッシュを変更することができます。
1. [詳細ペイン](#詳細ペイン) - マテリアル インスタンスのプロパティです。
1. [親リスト](#親リスト) - 現在のマテリアル インスタンスの親のチェーンのリストです。
1. [ビューポート](#ビューポート) - 現在のマテリアル インスタンスをプレビューします。



### ツールバー

| **アイコン** | **説明** | 
| --- | --- |
|  ![](button_MIE_Save.png) | 現在のアセットを保存します。 |
|  ![](button_MIE_Find.png) | **コンテンツ ブラウザ** でマテリアル インスタンス定数を検索します。|
| ![](button_MIE_Params.png) | **[Properties]** ペインで表示される親マテリアルに全てのマテリアル パラメータを作ります。 |
| ![](button_MIE_Mobile_Stats.png) | モバイルのマテリアル統計情報とコンパイルエラーを切り替えます。 |


### ビューポート表示オプション
| **アイコン** | **説明** | 
| --- | --- |
| ![](button_MIE_Cylinder.png) | シリンダー上のマテリアル インスタンスをプレビューします。 |
| ![](button_MIE_Sphere.png) | 球体上のマテリアル インスタンスをプレビューします。 |
| ![](button_MIE_Plane.png) | プレーン上のマテリアル インスタンスをプレビューします。 |
| ![](button_MIE_Cube.png) | キューブ上のマテリアル インスタンスをプレビューします。 |
| ![](button_MIE_Mesh.png) | カスタム仕様のスタティック メッシュ上のマテリアル インスタンスをプレビューします。 |
| ![](button_MIE_Grid.png) | マテリアル インスタンス ビューポート内で背景のグリッド線を切り替えます。 |
| ![](button_MIE_Realtime.png) | 有効になると、プレビューメッシュのマテリアルをリアルタイムで更新します。マテリアル エディタのパフォーマンスを高速にするために、このフラグを無効にします。 |

###詳細ペイン

![](MIE_Properties.png)

マテリアル インスタンス エディタの **[Details]** ペインは、すべての「作業」が行われる場所です。マテリアル インスタンスを使用している人は誰でも、[Details] ペインでパラメータの
 オーバーライドや変更が可能です。マテリアル インスタンスの親マテリアル内に存在する各パラメータは、親マテリアルのパラメータに割り当てられた [グループ](Engine/Rendering/Materials/MaterialInstances#パラメータグループ) の 
  **Parameter Groups** にリスト化されます。デフォルトでは、親のパラメータ値がオーバーライドされることはありません。使用するには有効にする必要があります。 
 パラメータを有効にするには、有効にしたいパラメータ名の横にある **グレーアウトしているボックス** を **マウスの左ボタン** でクリックします。この操作を行うと
 グレーアウトが解除され、対象のパラメータの調整が可能になります。 

* **Parameter Groups** - 親マテリアルからマテリアル インスタンスに公開されている値をすべて変更することができるセクションです。 
* **General** - 親マテリアル、物理マテリアルの変更、さらにマテリアル インスタンスの Lightmass ビルドへの影響の及ぼし方の調整ができる一般的なセクションです。 
* **Material Overrides** - マテリアルの基本値を調整できます。 


### 親リスト

![](MIE_Parent.png)

マテリアル インスタンスは他のマテリアル インスタンスを親として持つことができるので、ベースがなくなってしまったマテリアル インスタンスのオリジナルのマテリアルを探すのが難しい場合があります。
親リストは、現在のマテリアル インスタンスの親をチェーンが開始されたルート マテリアルまでずっとさかのぼって表示するので、そのような問題を解決します。
例えば、上で表示された親リストには、マテリアル インスタンス **MasterDemoMaterial_Parent** を親にもつ **Instance_Metallic_Medium** という名前のマテリアルが示されています。
 **MasterDemoMaterial_Parent** は **MasterDemoMaterial** を親に持っていることが親リストで分かります。編集中のインスタンスは **太字** で表示されます。

さらに、親リスト上で項目を何か **ダブルクリック** すると、その親のエディタが起動します。親の項目を **右クリック** して **[Sync Generic Browser]** を選択すれば、 
汎用ブラウザで親を探すことができます。


### ビューポート

![](MIE_Preview.png)

マテリアル ビューポートは、メッシュに適用する編集中のマテリアルを表示します。以下の方法でビューポートとインタラクトすることができます。

* **マウスの左ボタン** をドラッグしてメッシュを回転させます。 
* **マウスホイール** でドラッグしてパンし、 **マウスの右ボタン** でドラッグしてズームします。  
* 光の方向を回転させるには、 **L** キーを押したまま **マウスの左ボタン** を使ってドラッグします。


プレビュー メッシュは、関連するボタン制御を利用して変更できます (形状ボタン、 **[Select Preview Mesh]** コンボと **[Use Selected StaticMesh]** ボタン)。
プレビュー メッシュはマテリアルと一緒に保存されるので、次回そのマテリアルがをマテリアル エディタで開くと、同じメッシュ上でプレビューされます。


![](MIE_Change_Shapes.png)

マテリアル インスタンス エディタのビューポートは、各種シェーダータイプのインストラクション数や、 
マテリアルが使用しているテクスチャ サンプル数などのマテリアル情報も表示します。

![](MIE_Ins_Count.png)

マテリアルに何らかの移動設定がしてあり、それをプレビューした場合は、ストップウォッチの形をしたアイコンをクリックすると、リアルタイム プレビューを有効にすることができます。

![](MIE_Real_Time.png)


## インスタンスの作成

[INCLUDE:Engine/Rendering/Materials\MaterialInstances#MakingAnInstance]

## パラメータのオーバーライド

それぞれのパラメータ名の左側にあるチェックボックスで、オーバーライドされた値を使用するかどうかを指定します。以下の **Base Metal 、Base Roughness 、 Chrome Roughness** と **OPACITY Chrome** は使用されますが、 
 **Base Scratch Roughness 、Base UV Tile** と **Chrome Metal** は使用されません。チェックを入れた値のみがメモリ保存の理由で格納され、 
チェックされなかった値はマテリアル インスタンス エディタのウィンドウが閉じた時に消えます。

![](MIE_Overriding.png)



## ワークフロー

これらの機能を使って、新規マテリアル インスタンスを作成するための一貫したワークフローを作りたいと思います。  


### アーティスト向けワークフロー

アーティストがこのエディタで作業する場合、以下のような使い方が一番多いでしょう。


1. 外見を変えるためにパラメータで新規マテリアルを作成する。
1. コンテンツ ブラウザ を **右クリック** して、パッケージ内に新規マテリアル インスタンス定数を作成する。
1. 既に作成したマテリアルを新規マテリアル インスタンス定数の親に割り当てる。
1. マテリアルの見え方を変えるためにマテリアル インスタンス パラメータを変更する。
1. アーティストとレベルデザイナは、エディタを使って新規作成されたマテリアル インスタンス定数を使えるようになりました。



### レベルデザイナ向けワークフロー

レベルデザイナがこのエディタで作業する場合、以下のような使い方が一番多いでしょう。


1. 外見を変えるためにパラメータで新規マテリアルを作成する。
1. レベル全体にマテリアルを配置する。  
1. マテリアルの調整が必要だと感じ、アクタ上を **右クリック** して上記で説明したメニュー オプションを使って新規マテリアル インスタンスを作成する。
1. マテリアルの外見を変更および修正した場合、インスタンス パラメータの隣のボックスにチェックを入れる。
1. (オプション) この方法で作成されたマテリアル インスタンスはレベル パッケージ内に格納されるので、レベルデザイナはオプションとして他のアクタに対して作成されたマテリアル インスタンスを適用することもできます。 
  マテリアル インスタンスは、汎用ブラウザのレベルパッケージ内に表示されます。

 





